angular.module("RDash",["ui.bootstrap","ui.router","ngCookies"]);
"use strict";angular.module("RDash").config(["$stateProvider","$urlRouterProvider",function(t,l){l.otherwise("/admin"),t.state("tables",{url:"/tables",templateUrl:"public/admin/tables.html"}).state("admin",{url:"/admin",topName:"Admin Setup",path:"Home / Admin",templateUrl:"/public/admin/templates/admin.html"}).state("country",{url:"/country",topName:"Country Setup",templateUrl:"/public/admin/templates/admin/country.html",controller:"CountryCtrl"}).state("clinic",{url:"/clinic",topName:"Clinic Setup",templateUrl:"/public/admin/templates/admin/clinic.html",controller:"ClinicCtrl"}).state("order",{url:"/order",templateUrl:"/public/admin/templates/order.html",controller:"OrderCtrl"}).state("tax",{url:"/tax",templateUrl:"/public/admin/templates/admin/tax.html",controller:"TaxCtrl"}).state("vendor",{url:"/vendor",templateUrl:"/public/admin/templates/admin/vendor.html",controller:"VendorCtrl"}).state("reports",{url:"/reports",templateUrl:"/public/admin/templates/reports.html"}).state("low_stock",{url:"/low_stock",templateUrl:"/public/admin/templates/reports/low-stock.html",controller:"LowStockCtrl"}).state("product",{url:"/product",templateUrl:"/public/admin/templates/product.html",controller:"ProductCtrl"})}]);
"use strict";function AlertsCtrl(t,o){t.alerts=[],t.config={endPoint:"/reports/low_stock/"},t.addAlert=function(o){t.alerts.push({type:o.type,msg:o.msg})},t.closeAlert=function(o){t.alerts.splice(o,1)},t.reloadLowStockList=function(){o.get(t.config.endPoint).success(function(o,e,r,l){t.products=o,t.alerts=[];for(var n=0;n<o.length;n++){var s=o[n].clinic_name+" is low on "+o[n].name;t.addAlert({type:"danger",msg:s})}})},t.$on("reloadLowStockAlert",function(){t.reloadLowStockList()}),t.reloadLowStockList()}angular.module("RDash").controller("AlertsCtrl",["$scope","$http",AlertsCtrl]);
"use strict";function ClinicCtrl(n,i,t,o,c){n.config={"new":"Add Clinic",modify:"Modify Clinic",modalSize:"sm",templateUrl:"clinic.html",controller:"ModalClinicCtrl",endPoint:"/admin/clinic/",endPointCountry:"/admin/country/"},n.selected="",n.$state=i,n.reloadClinicList=function(){t.get(n.config.endPoint).success(function(i,t,o,c){n.clinics=i})},n.reloadCountryList=function(){t.get(n.config.endPointCountry).success(function(i,t,o,c){n.countries=i})},n.modify=function(i){n.openModal(i,n.config.modify)},n["new"]=function(){n.openModal("",n.config["new"])},n["delete"]=function(i){var o=n.config.endPoint;o+=i.clinic_id+"/",t({url:o,method:"DELETE",data:{}}).then(function(i){"fail"!=i.data.status?n.reloadClinicList():alert(i.data.message)},function(n){alert("Failed to delete clinic: "+i.name)})},n.openModal=function(i,t){var e=o.open({animation:n.animationsEnabled,templateUrl:n.config.templateUrl,controller:n.config.controller,size:n.config.modalSize,resolve:{clinic:function(){return i},action:function(){return t},config:function(){return n.config},countries:function(){return n.countries}}});e.result.then(function(i){n.reloadClinicList()},function(){c.info("Modal dismissed at: "+new Date)})},n.reloadClinicList(),n.reloadCountryList()}function ModalClinicCtrl(n,i,t,o,c,e,l){n.action=c,n.selected=o,n.countries=l,n.ok=function(){var c=e.endPoint;o.hasOwnProperty("clinic_id")&&(c+=o.clinic_id+"/"),t({url:c,method:"POST",data:{clinic:n.selected}}).then(function(n){"fail"!=n.data.status?i.close():alert(n.data.message)},function(n){alert("Failed to insert/update clinic")})},n.cancel=function(){i.dismiss("cancel")}}angular.module("RDash").controller("ClinicCtrl",["$scope","$state","$http","$modal","$log",ClinicCtrl]),angular.module("RDash").controller("ModalClinicCtrl",["$scope","$modalInstance","$http","clinic","action","config","countries",ModalClinicCtrl]);
"use strict";function CountryCtrl(t,e,n,o,l,r){t.config={"new":"Add Country",modify:"Modify Country",deleteAction:"Are you sure you want to delete this Country?",modalSize:"sm",templateUrl:"country.html",templateUrlDelete:"country-delete.html",controller:"ModalCountryCtrl",controllerDelete:"ModalCountryCtrlDelete",endPoint:"/admin/country/"},t.sortType="name",t.sortReverse=!1,t.selected="",t.$state=e,t.reloadCountryList=function(){n.get(t.config.endPoint).success(function(e,n,o,l){t.countries=e})},t.modify=function(e){t.openModal(e,t.config.modify)},t["new"]=function(){t.openModal("",t.config["new"])},t["delete"]=function(e){var n=o.open({animation:t.animationsEnabled,templateUrl:t.config.templateUrlDelete,controller:t.config.controllerDelete,size:t.config.modalSize,resolve:{country:function(){return e},config:function(){return t.config}}});n.result.then(function(){t.reloadCountryList(),r.displayFlashMessage("Country setup deleted: "+e.name)},function(){l.info("Modal dismissed at: "+new Date)})},t.openModal=function(e,n){var a=o.open({animation:t.animationsEnabled,templateUrl:t.config.templateUrl,controller:t.config.controller,size:t.config.modalSize,resolve:{country:function(){return e},action:function(){return n},config:function(){return t.config}}});a.result.then(function(n){t.reloadCountryList(),n==t.config["new"]?r.displayFlashMessage("Country added"):r.displayFlashMessage("Country modfied: "+e.name)},function(){l.info("Modal dismissed at: "+new Date)})},t.reloadCountryList()}function ModalCountryCtrl(t,e,n,o,l,r){t.action=l,t.selected=o,t.ok=function(){var a="";if(""===t.selected.name&&(a+="Country name cannot be empty\n"),""===t.selected.currency&&(a+="Currency name cannot be empty\n"),""==a){var c=r.endPoint;o.hasOwnProperty("country_id")&&(c+=o.country_id+"/"),n({url:c,method:"POST",data:{country:t.selected}}).then(function(t){"fail"!=t.data.status?e.close(l):alert(t.data.message)},function(t){alert("Failed to insert/update country")})}else alert(a)},t.cancel=function(){e.dismiss("cancel")}}function ModalCountryCtrlDelete(t,e,n,o,l){t.deleteAction=l.deleteAction,t.ok=function(){var t=l.endPoint;t+=o.country_id+"/",n({url:t,method:"DELETE",data:{}}).then(function(t){"fail"!=t.data.status?e.close():alert(t.data.message)},function(t){alert("Failed to delete country: "+o.name)})},t.cancel=function(){e.dismiss("cancel")}}angular.module("RDash").controller("CountryCtrl",["$scope","$state","$http","$modal","$log","LowStockService",CountryCtrl]),angular.module("RDash").controller("ModalCountryCtrl",["$scope","$modalInstance","$http","country","action","config",ModalCountryCtrl]),angular.module("RDash").controller("ModalCountryCtrlDelete",["$scope","$modalInstance","$http","country","config",ModalCountryCtrlDelete]);
"use strict";function LowStockCtrl(o,t,c,e,s){o.config={endPoint:"/reports/low_stock/"},o.selected="",o.$state=t,o.reloadLowStockList=function(){c.get(o.config.endPoint).success(function(t,c,e,s){o.products=t})},o.reloadLowStockList()}angular.module("RDash").controller("LowStockCtrl",["$scope","$state","$http","$modal","$log",LowStockCtrl]);
"use strict";function MasterCtrl(e,t,o,a){e.$state=o,e.systemName="SMS v2",e.flashMessage="";var s=992;e.getWidth=function(){return window.innerWidth},e.selected="",e.$watch(e.getWidth,function(o,a){o>=s?angular.isDefined(t.get("toggle"))?e.toggle=t.get("toggle")?!0:!1:e.toggle=!0:e.toggle=!1}),e.toggleSidebar=function(){e.toggle=!e.toggle,t.put("toggle",e.toggle)},e.$on("displayFlashMessage",function(t,o){e.displayFlashMessage(o.msg)}),e.displayFlashMessage=function(t){e.flashMessage=t},window.onresize=function(){e.$apply()}}function LowStockService(e){var t={};return t.reloadLowStockAlert=function(){e.$broadcast("reloadLowStockAlert")},t.displayFlashMessage=function(t){e.$broadcast("displayFlashMessage",{msg:t})},t}angular.module("RDash").controller("MasterCtrl",["$scope","$cookieStore","$state","$http",MasterCtrl]),angular.module("RDash").factory("LowStockService",["$rootScope",LowStockService]);
"use strict";function OrderCtrl(n,e,o,t,r){n.config={"new":"Add Order",modify:"Modify Order",modalSize:"",templateUrl:"order.html",quantity_on_hand:5,controller:"ModalOrderCtrl",endPoint:"/admin/orders/",endPointVendor:"/admin/vendor/",endPointTax:"/admin/tax_with_currency/",endPointClinic:"/admin/clinic",endPointClinicProduct:"/admin/product_by_clinic_id/",endPointOrderLine:"/admin/orders_line/"},n.selected="",n.$state=e,n.reloadOrdersList=function(){o.get(n.config.endPoint).success(function(e,o,t,r){n.orders=e})},n.reloadVendorsList=function(){o.get(n.config.endPointVendor).success(function(e,o,t,r){n.vendors=e})},n.reloadTaxList=function(){o.get(n.config.endPointTax).success(function(e,o,t,r){n.tax=e})},n.reloadClinicList=function(){o.get(n.config.endPointClinic).success(function(e,o,t,r){n.clinics=e})},n.modify=function(e){n.openModal(e,n.config.modify)},n["new"]=function(){n.openModal("",n.config["new"])},n["delete"]=function(e){var t=n.config.endPoint;t+=e.stock_order_id+"/",o({url:t,method:"DELETE",data:{}}).then(function(e){"fail"!=e.data.status?n.reloadOrdersList():alert(e.data.message)},function(n){alert("Failed to delete order: "+e.stock_order_id)})},n.openModal=function(e,o){var i=t.open({animation:n.animationsEnabled,templateUrl:n.config.templateUrl,controller:n.config.controller,size:n.config.modalSize,resolve:{order:function(){return e},action:function(){return o},config:function(){return n.config},vendors:function(){return n.vendors},tax:function(){return n.tax},clinic:function(){return n.clinics}}});i.result.then(function(e){n.reloadOrdersList(),n.reloadLowStockAlert()},function(){n.reloadOrdersList(),r.info("Modal dismissed at: "+new Date)})},n.reloadOrdersList(),n.reloadVendorsList(),n.reloadTaxList(),n.reloadClinicList()}function ModalOrderCtrl(n,e,o,t,r,i,d,c,a){n.action=r,n.selected=t,n.ordersLines=[],n.currentOrderLine=t.orderLines,n.vendors=d,n.tax=c,n.newOrderLine=function(){n.ordersLines.push({quantity_on_hand:i.quantity_on_hand,clinics:a})},n.removeOrderLine=function(n,e){e.splice(n,1)},n.removeAllOrderLine=function(e,r){var d=i.endPointOrderLine;d+=t.stock_order_id+"/",o({url:d,method:"DELETE",data:{}}).then(function(e){"fail"!=e.data.status?n.currentOrderLine=[]:alert(e.data.message)},function(n){alert("Failed to delete orderline")})},n.getProductsByClinic=function(e,t,r){var d=i.endPointClinicProduct;d+=e+"/",o.get(d).success(function(e,o,r,i){n.ordersLines[t].products=e})},n.ok=function(){var r=i.endPoint;t.hasOwnProperty("stock_order_id")&&(r+=t.stock_order_id+"/"),console.log(n.ordersLines),o({url:r,method:"POST",data:{order:n.selected,orderlines:n.ordersLines}}).then(function(n){"fail"!=n.data.status?e.close():alert(n.data.message)},function(n){alert("Failed to insert/update order")})},n.cancel=function(){e.dismiss("cancel")}}angular.module("RDash").controller("OrderCtrl",["$scope","$state","$http","$modal","$log",OrderCtrl]),angular.module("RDash").controller("ModalOrderCtrl",["$scope","$modalInstance","$http","order","action","config","vendors","tax","clinic",ModalOrderCtrl]);
"use strict";function ProductCtrl(t,o,n,c,e,i){t.config={"new":"Add Product Per Clinic",modify:"Modify Product",modalSize:"sm",templateUrl:"product.html",controller:"ModalProductCtrl",endPoint:"/reports/product/",endPointClinic:"/admin/clinic/"},t.selected="",t.$state=o,t.reloadProductList=function(){n.get(t.config.endPoint).success(function(o,n,c,e){t.products=o})},t.reloadClinicList=function(){n.get(t.config.endPointClinic).success(function(o,n,c,e){t.clinics=o})},t.modify=function(o){t.openModal(o,t.config.modify)},t["new"]=function(){t.openModal("",t.config["new"])},t["delete"]=function(o){var c=t.config.endPoint;c+=o.product_id+"/",n({url:c,method:"DELETE",data:{}}).then(function(o){"fail"!=o.data.status?t.reloadProductList():alert(o.data.message)},function(t){alert("Failed to delete Product: "+o.name)})},t.openModal=function(o,n){var d=c.open({animation:t.animationsEnabled,templateUrl:t.config.templateUrl,controller:t.config.controller,size:t.config.modalSize,resolve:{product:function(){return o},action:function(){return n},config:function(){return t.config},clinic:function(){return t.clinics}}});d.result.then(function(o){t.reloadProductList(),i.reloadLowStockAlert()},function(){e.info("Modal dismissed at: "+new Date)})},t.reloadProductList(),t.reloadClinicList()}function ModalProductCtrl(t,o,n,c,e,i,d){t.action=e,t.selected=c,t.clinics=d,t.ok=function(){var e=i.endPoint;c.hasOwnProperty("product_id")&&(e+=c.product_id+"/"),n({url:e,method:"POST",data:{product:t.selected}}).then(function(t){"fail"!=t.data.status?o.close():alert(t.data.message)},function(t){alert("Failed to insert/update product")})},t.cancel=function(){o.dismiss("cancel")}}angular.module("RDash").controller("ProductCtrl",["$scope","$state","$http","$modal","$log","LowStockService",ProductCtrl]),angular.module("RDash").controller("ModalProductCtrl",["$scope","$modalInstance","$http","product","action","config","clinic",ModalProductCtrl]);
"use strict";function TaxCtrl(t,e,n,o,a){t.config={"new":"Add Tax For Country",modify:"Modify Tax Setup",modalSize:"sm",templateUrl:"tax.html",controller:"ModalTaxCtrl",endPoint:"/admin/tax/",endPointCountry:"/admin/country/"},t.selected="",t.$state=e,t.reloadTaxList=function(){n.get(t.config.endPoint).success(function(e,n,o,a){t.tax=e})},t.reloadCountryList=function(){n.get(t.config.endPointCountry).success(function(e,n,o,a){t.countries=e})},t.modify=function(e){t.openModal(e,t.config.modify)},t["new"]=function(){t.openModal("",t.config["new"])},t["delete"]=function(e){var o=t.config.endPoint;o+=e.tax_id+"/",n({url:o,method:"DELETE",data:{}}).then(function(e){"fail"!=e.data.status?t.reloadTaxList():alert(e.data.message)},function(t){alert("Failed to delete Tax Setup: "+e.country_name)})},t.openModal=function(e,n){var i=o.open({animation:t.animationsEnabled,templateUrl:t.config.templateUrl,controller:t.config.controller,size:t.config.modalSize,resolve:{tax:function(){return e},action:function(){return n},config:function(){return t.config},countries:function(){return t.countries}}});i.result.then(function(e){t.reloadTaxList()},function(){a.info("Modal dismissed at: "+new Date)})},t.reloadTaxList(),t.reloadCountryList()}function ModalTaxCtrl(t,e,n,o,a,i,l){t.action=a,t.selected=o,t.countries=l,t.ok=function(){if(t.selected.percent.length>3||t.selected.percent>100)return void alert("Percent value must be smaller than 100");if(isNaN(parseFloat(t.selected.percent))&&!isFinite(t.selected.percent))return void alert("Percent value must contain numbers");var a=i.endPoint;o.hasOwnProperty("tax_id")&&(a+=o.tax_id+"/"),n({url:a,method:"POST",data:{tax:t.selected}}).then(function(t){"fail"!=t.data.status?e.close():alert(t.data.message)},function(t){alert("Failed to insert/update tax setup")})},t.cancel=function(){e.dismiss("cancel")}}angular.module("RDash").controller("TaxCtrl",["$scope","$state","$http","$modal","$log",TaxCtrl]),angular.module("RDash").controller("ModalTaxCtrl",["$scope","$modalInstance","$http","tax","action","config","countries",ModalTaxCtrl]);
"use strict";function VendorCtrl(n,e,o,t,d){n.config={"new":"Add Vendor",modify:"Modify Vendor",modalSize:"",templateUrl:"vendor.html",controller:"ModalVendorCtrl",endPoint:"/admin/vendor/"},n.selected="",n.$state=e,n.reloadVendorList=function(){o.get(n.config.endPoint).success(function(e,o,t,d){n.vendors=e})},n.modify=function(e){n.openModal(e,n.config.modify)},n["new"]=function(){n.openModal("",n.config["new"])},n["delete"]=function(e){var t=n.config.endPoint;t+=e.vendor_id+"/",o({url:t,method:"DELETE",data:{}}).then(function(e){"fail"!=e.data.status?n.reloadVendorList():alert(e.data.message)},function(n){alert("Failed to delete Vendor Setup: "+e.name)})},n.openModal=function(e,o){var a=t.open({animation:n.animationsEnabled,templateUrl:n.config.templateUrl,controller:n.config.controller,size:n.config.modalSize,resolve:{vendor:function(){return e},action:function(){return o},config:function(){return n.config}}});a.result.then(function(e){n.reloadVendorList()},function(){d.info("Modal dismissed at: "+new Date)})},n.reloadVendorList()}function ModalVendorCtrl(n,e,o,t,d,a){n.action=d,n.selected=t,n.ok=function(){var d=a.endPoint;t.hasOwnProperty("vendor_id")&&(d+=t.vendor_id+"/"),o({url:d,method:"POST",data:{vendor:n.selected}}).then(function(n){"fail"!=n.data.status?e.close():alert(n.data.message)},function(n){alert("Failed to insert/update vendor setup")})},n.cancel=function(){e.dismiss("cancel")}}angular.module("RDash").controller("VendorCtrl",["$scope","$state","$http","$modal","$log",VendorCtrl]),angular.module("RDash").controller("ModalVendorCtrl",["$scope","$modalInstance","$http","vendor","action","config",ModalVendorCtrl]);
function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("RDash").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("RDash").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("RDash").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("RDash").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("RDash").directive("rdWidget",rdWidget);